#include <iostream>
using namespace std;
int max3(int a, int b, int c) {
    if(a >= b && a >= c){
        return a;
    } 
    else if(b >= a && b >= c){
        return b;
    }
    else{ 
    return c;
    }
}
int crossingSum(int arr[], int l, int m, int h) {
    int sum = 0;
    int leftMax = arr[m];
    for (int i = m; i >= l; i--) {
        sum += arr[i];
        if(sum > leftMax){
            leftMax = sum;
        }
    }
    sum = 0;
    int rightMax = arr[m + 1];
    for (int i = m + 1; i <= h; i++){
        sum += arr[i];
        if(sum > rightMax){
            rightMax = sum;
        }
    }

    return leftMax + rightMax;
}
int maxSubArray(int arr[], int l, int h) {
    if (l == h)
        return arr[l];

    int m = (l + h) / 2;

    return max3(
        maxSubArray(arr, l, m),
        maxSubArray(arr, m + 1, h),
        crossingSum(arr, l, m, h)
    );
}

int main() {
    int arr[] = {-2, -5, 6, -2, -3, 1, 5, -6};
    int n = sizeof(arr) / sizeof(arr[0]);
    cout << "Maximum subarray sum = "<< maxSubArray(arr, 0, n - 1);
    return 0;
}
